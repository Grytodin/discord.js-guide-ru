# Конфигурационные файлы

После того как вы [добавьте своего бота на сервер](/preparations/adding-your-bot-to-servers.md) следующим шагом будет начать кодировать и вывести его онлайн! Давайте начнем с создания конфигурационного файла для вашего клиентского токена и основного файла для вашего бота.

Как объясняется в разделе ["Что такое токен, собственно?"](/preparations/setting-up-a-bot-application.md#what-is-a-token-anyway) ваш токен по сути является паролем вашего бота, и вы должны защищать его максимально тщательно. Это можно сделать через файл config.json или с помощью переменных окружения.

Откройте ваше приложение в [Портал разработчика Discord](https://discord.com/developers/applications) и перейдите на страницу «Bot», чтобы скопировать ваш токен.

## Использование `config.json`

Хранение данных в файле `config.json` — это распространённый способ безопасного хранения конфиденциальной информации. Создайте файл `config.json` в директории вашего проекта и вставьте туда ваш токен. Вы сможете получить доступ к токену в других файлах с помощью `require()`.

:::: code-group
::: code-group-item config.json
```json
{
	"token": "ваш-токен-здесь"
}
```
:::
::: code-group-item Usage
```js
const { token } = require('./config.json');

console.log(token);
```
:::
::::

::: danger
Если вы используете Git, не следует добавлять этот файл в коммит, и вы должны… [игнорировать его с помощью `.gitignore`](/creating-your-bot/#git-and-gitignore).
:::

## Использование переменных окружения

Переменные окружения — это специальные значения для вашей среды (например, сеанса терминала, контейнера Docker или файла переменных окружения). Вы можете передавать эти значения в область видимости вашего кода, чтобы использовать их.

Один из способов передать переменные окружения — через интерфейс командной строки. При запуске вашего приложения вместо `node index.js`, используйте `TOKEN=ваш-токен-здесь node index.js`. Вы можете использовать этот же способ для передачи и других значений.

Вы можете получить доступ к установленным значениям в вашем коде через `process.env` глобальную переменную, доступную в любом файле. Обратите внимание, что значения, переданные таким образом, всегда будут строками, и их может понадобиться преобразовать в число, если вы собираетесь использовать их для вычислений.

:::: code-group
::: code-group-item Command line
```sh:no-line-numbers
A=123 B=456 DISCORD_TOKEN=ваш-токен-здесь node index.js
```
:::
::: code-group-item Usage
```js
console.log(process.env.A);
console.log(process.env.B);
console.log(process.env.DISCORD_TOKEN);
```
:::
::::

### Использование dotenv

Другой распространённый подход — хранить эти значения в файле `.env`. Это избавляет вас от необходимости постоянно вставлять токен в командную строку. Каждая строка в файле `.env` должна содержать пару `КЛЮЧ=значение`.

Вы можете использовать пакет [`dotenv` package](https://www.npmjs.com/package/dotenv) для этого. После установки подключите и используйте пакет, чтобы загрузить ваш файл `.env` и присвоить переменные объекту `process.env`:

:::: code-group
::: code-group-item npm
```sh:no-line-numbers
npm install dotenv
```
:::
::: code-group-item yarn
```sh:no-line-numbers
yarn add dotenv
```
:::
::: code-group-item pnpm
```sh:no-line-numbers
pnpm add dotenv
```
:::
::: code-group-item bun
```sh:no-line-numbers
# dotenv не обязателен при использовании Bun
# Bun автоматически считывает файлы .env
```
:::
::::

:::: code-group
::: code-group-item .env
```
A=123
B=456
DISCORD_TOKEN=ваш-токен-здесь
```
:::
::: code-group-item Usage
```js
const dotenv = require('dotenv');

dotenv.config();

console.log(process.env.A);
console.log(process.env.B);
console.log(process.env.DISCORD_TOKEN);
```
:::
::::

::: danger
Если вы используете Git, не следует добавлять этот файл в коммит, и вы должны игнорировать его с помощью [игнорировать его с помощью файла `.gitignore`](/creating-your-bot/#git-and-gitignore).
:::

::: details Online editors (Glitch, Heroku, Replit, etc.)
Хотя мы в целом не рекомендуем использовать онлайн-редакторы в качестве решений для хостинга и советуем инвестировать в полноценный виртуальный приватный сервер, эти сервисы также предлагают способы безопасного хранения ваших учетных данных! Пожалуйста, ознакомьтесь с документацией и справочными статьями соответствующего сервиса для получения дополнительной информации о том, как защитить конфиденциальные значения.
:

- Glitch: [Storing secrets in .env](https://help.glitch.com/hc/articles/16287550167437)
- Heroku: [Configuration variables](https://devcenter.heroku.com/articles/config-vars)
- Replit: [Secrets and environment variables](https://docs.replit.com/programming-ide/workspace-features/secrets)
:::

## Git and `.gitignore`

Git — это отличный инструмент для отслеживания изменений в вашем коде и позволяет загружать прогресс на такие сервисы, как [GitHub](https://github.com/), [GitLab](https://about.gitlab.com/), или [Bitbucket](https://bitbucket.org/product). Хотя это очень удобно для совместного использования кода с другими разработчиками, существует риск случайной загрузки ваших конфигурационных файлов с конфиденциальными данными!

Вы можете указать файлы, которые Git должен игнорировать в системе версионирования, с помощью файла `.gitignore` файл. Создайте файл `.gitignore` в директории вашего проекта и добавьте в него имена файлов и папок, которые вы хотите игнорировать:

```
node_modules
.env
config.json
```

::: tip
Помимо защиты учетных данных, `node_modules` следует включить сюда. Поскольку этот каталог можно восстановить на основе записей в ваших `package.json` и `package-lock.json`, выполняя `npm install`, его не нужно добавлять в Git.

Вы можете указывать достаточно сложные шаблоны в файлах `.gitignore`. Подробнее смотрите в [Документации Git по `.gitignore`](https://git-scm.com/docs/gitignore) for more information!
:::
